<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çº¸æ€¨ - ç›´æ’­å¼€åœº</title>
    <style>
        /* é‡ç½®æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            position: relative;
        }

        /* ç”µè„‘å±å¹•èƒŒæ™¯ - æš—è‰²è°ƒæˆ¿é—´ */
        .room-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            z-index: 1;
        }

        /* æ¸¸æˆæ ‡é¢˜ */
        .game-title {
            position: absolute;
            top: 30px;
            left: 0;
            width: 100%;
            text-align: center;
            color: #ff6b6b;
            font-size: 28px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
            letter-spacing: 2px;
            z-index: 5;
        }

        /* æ•´ä¸ªæ‰‹æœºç•Œé¢ */
        .game-container {
            width: 350px;
            height: 700px;
            background: #111;
            border-radius: 40px;
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.3);
            padding: 15px;
            overflow: hidden;
            position: relative;
            z-index: 10;
            margin-top: -30px;
        }

        /* æ‰‹æœºå±å¹•å†…å®¹ */
        .phone-screen {
            width: 100%;
            height: 100%;
            background: #000;
            border-radius: 30px;
            overflow: hidden;
            position: relative;
        }

        /* çŠ¶æ€æ  */
        .status-bar {
            height: 25px;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }

        .time { font-weight: bold; }
        .battery { color: #4cd964; }

        /* ç›´æ’­ä¸»å†…å®¹åŒº */
        .live-content {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        /* ç›´æ’­æ‘„åƒå¤´ç”»é¢ - æ—æ™šæ™´çš„è„¸ */
        .live-camera-view {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 5;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        /* ä¸»æ’­å¤´åƒï¼ˆæ‘„åƒå¤´ç”»é¢ä¸­çš„æ—æ™šæ™´ï¼‰ */
        .live-camera-view img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center 30%;
        }

        /* ç›´æ’­ä¿¡æ¯è¦†ç›–å±‚ */
        .live-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            pointer-events: none;
        }

        /* ä¸»æ’­ä¿¡æ¯ï¼ˆå·¦ä¸Šè§’ï¼‰ */
        .host-info-overlay {
            position: absolute;
            top: 30px;
            left: 15px;
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        .host-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 2px solid #ff6b6b;
            margin-right: 10px;
            object-fit: cover;
        }

        .host-name {
            color: #ff6b6b;
            font-size: 14px;
            font-weight: bold;
        }

        /* å¼¹å¹•åŒºåŸŸ */
        .danmu-area {
            position: absolute;
            top: 80px;
            left: 15px;
            width: 70%;
            height: 60%;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 10px;
            display: flex;
            flex-direction: column-reverse;
            z-index: 15;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 107, 107, 0.3) transparent;
        }

        .danmu-area::-webkit-scrollbar {
            width: 6px;
        }

        .danmu-area::-webkit-scrollbar-track {
            background: transparent;
        }

        .danmu-area::-webkit-scrollbar-thumb {
            background: rgba(255, 107, 107, 0.5);
            border-radius: 3px;
        }

        /* å¼¹å¹•æ ·å¼ - ç»Ÿä¸€é»‘è‰²èƒŒæ™¯ */
        .danmu {
            color: white;
            font-size: 14px;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            margin-bottom: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            word-break: break-word;
            line-height: 1.4;
            transition: opacity 0.3s;
            max-width: 90%;
            align-self: flex-start;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .danmu.fading {
            opacity: 0.3;
        }

        /* NEWå¼¹å¹•æç¤º */
        .new-danmu-indicator {
            position: absolute;
            top: 70px;
            right: 15px;
            background: rgba(255, 107, 107, 0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            z-index: 20;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s;
            pointer-events: auto;
        }

        .new-danmu-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* åœ¨çº¿äººæ•°æ˜¾ç¤º */
        .viewer-count {
            position: absolute;
            top: 30px;
            right: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: #ff6b6b;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 20;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        /* åº•éƒ¨æ–‡æœ¬æ¡†æ ·å¼ï¼ˆå‚è€ƒgate.htmlï¼‰ */
        .bottom-dialog-box {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.85);
            padding: 15px;
            border-top: 2px solid #8B0000;
            z-index: 20;
            opacity: 0; /* åˆå§‹éšè— */
            transition: opacity 0.5s ease-in-out; /* æ›´å¿«çš„æ¸ç°åŠ¨ç”» */
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .bottom-dialog-box.show {
            opacity: 1; /* æ˜¾ç¤º */
        }

        .bottom-dialog-header {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #DC143C;
            font-weight: bold;
        }

        .bottom-dialog-header .mic-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            background: #DC143C;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
        }

        .bottom-dialog-text {
            color: #FFF8DC;
            line-height: 1.6;
            font-size: 16px;
            padding: 5px 0;
        }

        /* ç»§ç»­æç¤º */
        .continue-hint {
            color: #FFD700;
            font-size: 14px;
            text-align: center;
            margin-top: 5px;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
            animation: pulse 1s infinite; /* æ›´å¿«çš„å‘¼å¸åŠ¨ç”» */
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* æŸ¥çœ‹åœ°å›¾æŒ‰é’®æ ·å¼ */
        .map-link {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            color: #fff;
            border: 2px solid #ff6b6b;
            padding: 8px 15px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
            z-index: 30;
            display: none; /* é»˜è®¤éšè— */
            transition: all 0.2s;
        }

        .map-link.show {
            display: inline-block; /* æ˜¾ç¤º */
        }

        .map-link:hover {
            background-color: rgba(255, 107, 107, 0.2);
            transform: scale(1.05);
        }

        /* ç‚¹å‡»åŒºåŸŸ */
        .click-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 15;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- ç”µè„‘å±å¹•èƒŒæ™¯ -->
    <div class="room-background"></div>
    
    <!-- æ¸¸æˆæ ‡é¢˜ -->
    <div class="game-title">çº¸æ€¨ - ç›´æ’­å¼€åœº</div>

    <!-- æŸ¥çœ‹åœ°å›¾æŒ‰é’®ï¼ˆé»˜è®¤éšè—ï¼‰ -->
    <a href="map.html" class="map-link" id="map-link">æŸ¥çœ‹åœ°å›¾</a>

    <!-- æ•´ä¸ªæ‰‹æœºç•Œé¢ -->
    <div class="game-container">
        <div class="phone-screen">
            <!-- çŠ¶æ€æ  -->
            <div class="status-bar">
                <div class="time">19:43</div>
                <div class="network">5G</div>
                <div class="battery">87%</div>
            </div>

            <!-- ç›´æ’­å†…å®¹ -->
            <div class="live-content">
                <!-- ç›´æ’­æ‘„åƒå¤´ç”»é¢ - æ—æ™šæ™´çš„è„¸ -->
                <div class="live-camera-view">
                    <img src="res/æ—æ™šæ™´.png" alt="æ—æ™šæ™´ç›´æ’­" id="live-face">
                </div>

                <!-- ç›´æ’­ä¿¡æ¯è¦†ç›–å±‚ -->
                <div class="live-overlay">
                    <!-- ä¸»æ’­ä¿¡æ¯ -->
                    <div class="host-info-overlay">
                        <img src="res/æ—æ™šæ™´.png" alt="æ—æ™šæ™´" class="host-avatar">
                        <div class="host-name">æ™šæ™´ä¸æ™š</div>
                    </div>

                    <!-- å¼¹å¹•åŒºåŸŸ -->
                    <div class="danmu-area" id="danmu-container"></div>

                    <!-- NEWå¼¹å¹•æç¤º -->
                    <div class="new-danmu-indicator" id="new-danmu-indicator">
                        æ–°å¼¹å¹• <span id="new-count">0</span>+
                    </div>

                    <!-- åœ¨çº¿äººæ•° -->
                    <div class="viewer-count">åœ¨çº¿ï¼š<span id="viewer-num">8,214</span>äºº</div>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨æ–‡æœ¬æ¡†ï¼ˆå‚è€ƒgate.htmlæ ·å¼ï¼‰ -->
    <div class="bottom-dialog-box" id="bottom-dialog">
        <div class="bottom-dialog-header">
            <span class="mic-icon">ğŸ¤</span>
            æ—æ™šæ™´
        </div>
        <div class="bottom-dialog-text" id="dialog-content"></div>
        <div class="continue-hint">ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®ç»§ç»­</div>
    </div>

    <!-- ç‚¹å‡»ç»§ç»­åŒºåŸŸ -->
    <div class="click-area" id="click-area"></div>

    <script>
        // æ•°æ®é…ç½® - æ‹†åˆ†ä¸»æ’­æœ€åä¸€å¥ä¸ºç‹¬ç«‹æ ‡è¯†
        const liveData = {
            // å¼¹å¹•æ± 
            randomDanmuPool: [
                "æ™šæ™šè€å©†æˆ‘æ¥å•¦~", "ä¸»æ’­æ™šä¸Šå¥½", "æ™šæ™šä»Šå¤©å¥½ç¾ï¼", "è¿™æ˜¯ä»€ä¹ˆç›´æ’­ï¼Ÿ", "ææ€–å‰§æœ¬æ€ï¼Ÿåˆºæ¿€ï¼", 
                "æ™šæ™šå¥½å¯çˆ±", "å…³æ³¨äº†å…³æ³¨äº†", "ç¤¼ç‰©èµ°ä¸€æ³¢", "èƒŒæ™¯å¥½æš—å•Š", "ä¸»æ’­åœ¨å“ªé‡Œï¼Ÿ", 
                "è¿™ä¸ªæ ¡é—¨æœ‰ç‚¹çœ¼ç†Ÿ", "å®³æ€•ä½†åˆæƒ³çœ‹", "æ™šæ™šå£°éŸ³å¥½å¥½å¬", "æ”¯æŒæ™šæ™šï¼", "å‰§æœ¬æ€å¼€å§‹äº†å—ï¼Ÿ", 
                "åœ¨çº¿äººæ•°å¥½å¤š", "æ–°æ¥çš„æ±‚ç§‘æ™®", "è¿™ä¸ªå¸ƒæ™¯å¥½çœŸå®", "æ™šæ™šåŠ æ²¹ï¼", "æœŸå¾…åç»­", 
                "ä¸æ•¢çœ‹ä½†æƒ³çœ‹", "æ™šæ™šæœ€ç¾ï¼", "è¿™ä¸ªç›´æ’­æœ‰æ„æ€", "ç»§ç»­ç»§ç»­", "å…³æ³¨ç‚¹èµ·æ¥"
            ],
            // æ ¸å¿ƒå¯¹è¯æµç¨‹ï¼ˆä¸»æ’­å°è¯+å¯¹åº”å¼¹å¹•ï¼‰
            dialogues: [
                {
                    host: "å®å®ä»¬æ™šä¸Šå¥½ï¼ä»Šæ™šä¸Šç»™å¤§å®¶æ¥ä¸ªç‰¹åˆ«ç›´æ’­ï¼çŒœçŒœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ",
                    danmus: ["æ™šæ™šè€å©†æˆ‘æ¥å•¦~", "ä¸»æ’­æ™šä¸Šå¥½ï¼Œæ™šæ™šä»Šå¤©å¥½ç¾ï¼", "æ™šæ™šå‘¨å›´å¥½é»‘å•Šï¼Œè¿™æ˜¯åœ¨å“ªï¼Ÿ"]
                },
                {
                    host: "å¥½å•¦~ä¸å–å…³å­äº†ï¼Œä»Šå¤©æ™šæ™šè¦å¸¦ä½ ä»¬å›åˆ°æˆ‘çš„é«˜ä¸­æ¯æ ¡ã€‚æ®è¯´è¿™é‡Œä¸ƒå¹´å‰æœ‰ä¸ªå¥³ç”Ÿè·³æ¥¼ï¼Œä¸€ç›´åœ¨é—¹é¬¼ï¼Œå®³çš„æˆ‘ä»¬æ¯æ ¡åªèƒ½æ¬èµ°ï¼Œæ˜å¤©å°±è¦æ‹†è¿äº†ã€‚",
                    danmus: ["ç›´æ’­æ ‡é¢˜æš´éœ²äº†ä½ ï¼ˆdogeï¼‰", "å“‡å¡ï¼çœŸäººææ€–å‰§æœ¬æ€ï¼è¿™ä¹ˆåˆºæ¿€ï¼Ÿï¼"]
                },
                {
                    host: "è°¢è°¢å¤§å®¶é€çš„ç¤¼ç‰©~ä¸è¿‡å¤§å®¶åˆ«å®³æ€•ï¼Œä»Šæ™šæˆ‘ä»¬æœ‰äº”ä½è€åŒå­¦èšåœ¨ä¸€èµ·ï¼Œèª“è¦æªå‡ºæ˜¯è°åœ¨è£…ç¥å¼„é¬¼ï¼å‡¶æ‰‹å°±åœ¨æˆ‘ä»¬å½“ä¸­å“¦~åˆšè¿›ç›´æ’­é—´çš„å®å®ä»¬è®°å¾—ç»™æ™šæ™šç‚¹ç‚¹å…³æ³¨~çœ‹ä¸»æ’­å¸¦ä½ ä»¬æŠ“å‡ºå‡¶æ‰‹ï¼",
                    danmus: ["çœŸçš„å‡çš„å•Šï¼Ÿå¤§æ‰‹ç¬”å•Šï¼Œä¸ºäº†è¿™ä¸ªå‰§æœ¬æ€è¿˜ç‰¹æ„æ‰¾äº†åœºåœ°å—ï¼Ÿ", "å·²ç»å¼€å§‹äº†å—ï¼Ÿè¿™ä¹ˆæ²‰æµ¸å—ï¼Ÿ", "åˆšæ¥ï¼Œè¿™æ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿæ™šæ™šè¦æ”¹è¡Œäº†ï¼Ÿæˆ‘è¿˜æƒ³çœ‹ä¸»æ’­è¾£èˆæ¥ç€ï¼ˆå¯æƒœï¼‰", "ä»Šå¤©å±…ç„¶æ˜¯ææ€–partï¼ŸæœŸå¾…ä½äº†", "å°±æ™šæ™šä¸€ä¸ªäººå—ï¼Ÿè¿˜æœ‰è°å•Šï¼Ÿ", "å¿«è¿›åˆ°ä¸»æ’­è¢«å“å“­ï¼", "èƒ†å°äººå£«ä¸æ•¢çœ‹äº†", "æ™šæ™šåˆ«æ€•ï¼Œæ€•çš„è¯èº²æˆ‘æ€€é‡Œï¼ˆçŒ¥çç¬‘ï¼‰", "ä¸ä¼šæ˜¯æ¥æå™±å¤´å§"],
                    isLast: true // æ ‡è®°è¿™æ˜¯æœ€åä¸€å¥ä¸»æ’­å°è¯
                }
            ]
        };

        // DOMå…ƒç´ 
        const elements = {
            danmuContainer: document.getElementById('danmu-container'),
            dialogContent: document.getElementById('dialog-content'),
            bottomDialog: document.getElementById('bottom-dialog'),
            viewerNum: document.getElementById('viewer-num'),
            newDanmuIndicator: document.getElementById('new-danmu-indicator'),
            newCount: document.getElementById('new-count'),
            clickArea: document.getElementById('click-area'),
            liveFace: document.getElementById('live-face'),
            mapLink: document.getElementById('map-link')
        };

        // çŠ¶æ€ç®¡ç†
        let state = {
            currentDialogIndex: 0, // å½“å‰å¯¹è¯ç´¢å¼•
            viewerCount: 8214,
            isLiveComplete: false,
            newDanmuCount: 0,
            isScrollingDanmu: false
        };

        // åˆå§‹åŒ–å‡½æ•°
        function initLive() {
            elements.liveFace.style.objectPosition = "center 30%";
            
            // æ–‡æœ¬æ¡†å¿«é€Ÿæ¸ç°ï¼ˆ0.5ç§’ï¼‰
            setTimeout(() => {
                elements.bottomDialog.classList.add('show');
            }, 300);
            
            // ç«‹å³æ˜¾ç¤ºç¬¬ä¸€å¥ä¸»æ’­å°è¯
            showHostDialog(0);
            
            // æé€Ÿå¢é•¿åœ¨çº¿äººæ•°ï¼ˆæ¯300msæ›´æ–°ï¼‰
            simulateFastViewerGrowth();
            
            // ç»‘å®šç‚¹å‡»äº‹ä»¶
            elements.clickArea.addEventListener('click', handleDialogClick);
            elements.newDanmuIndicator.addEventListener('click', scrollToNewestDanmu);
            elements.danmuContainer.addEventListener('scroll', handleDanmuScroll);
            
            // å¿«é€Ÿåˆ·åˆå§‹éšæœºå¼¹å¹•
            for (let i = 0; i < 5; i++) {
                setTimeout(() => createRandomDanmu(), i * 200);
            }
        }

        // æ˜¾ç¤ºä¸»æ’­å°è¯ï¼ˆç«‹å³æ˜¾ç¤ºï¼Œä¸ç­‰å¼¹å¹•ï¼‰
        function showHostDialog(index) {
            if (index >= liveData.dialogues.length) return;
            
            const current = liveData.dialogues[index];
            elements.dialogContent.textContent = current.host;
            
            // åŒæ­¥åˆ·å¯¹åº”å¼¹å¹•ï¼ˆå¿«é€Ÿåˆ·å±ï¼Œ100msä¸€ä¸ªï¼‰
            current.danmus.forEach((danmu, i) => {
                setTimeout(() => addDanmu(danmu), i * 100);
            });
        }

        // å¤„ç†ç‚¹å‡»ç»§ç»­ï¼ˆæ ¸å¿ƒï¼šä¸»æ’­è¯´å®Œå°±æ˜¾ç¤ºåœ°å›¾æŒ‰é’®ï¼‰
        function handleDialogClick(e) {
            if (e.target.closest('.map-link') || state.isLiveComplete) return;
            
            // ä¸‹ä¸€æ®µå¯¹è¯ç´¢å¼•
            const nextIndex = state.currentDialogIndex + 1;
            
            if (nextIndex < liveData.dialogues.length) {
                // æ˜¾ç¤ºä¸‹ä¸€å¥ä¸»æ’­å°è¯
                showHostDialog(nextIndex);
                state.currentDialogIndex = nextIndex;
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯æœ€åä¸€å¥ä¸»æ’­å°è¯
                if (liveData.dialogues[nextIndex].isLast) {
                    // ç«‹å³æ˜¾ç¤ºæŸ¥çœ‹åœ°å›¾æŒ‰é’®ï¼ˆä¸ç­‰å¼¹å¹•ï¼‰
                    setTimeout(() => {
                        elements.mapLink.classList.add('show');
                        document.querySelector('.continue-hint').textContent = "ç‚¹å‡»å·¦ä¸Šè§’æŸ¥çœ‹åœ°å›¾";
                        state.isLiveComplete = true;
                    }, 500); // ä¸»æ’­è¯´å®Œæœ€åä¸€å¥ï¼Œ0.5ç§’åæ˜¾ç¤ºæŒ‰é’®
                }
            }
        }

        // æ·»åŠ å¼¹å¹•
        function addDanmu(content) {
            const danmuElement = document.createElement('div');
            danmuElement.className = 'danmu';
            danmuElement.textContent = content;
            
            elements.danmuContainer.insertBefore(danmuElement, elements.danmuContainer.firstChild);
            
            // é™åˆ¶å¼¹å¹•æ•°é‡ï¼ˆæœ€å¤š15æ¡ï¼Œé¿å…å¡é¡¿ï¼‰
            if (elements.danmuContainer.children.length > 15) {
                elements.danmuContainer.removeChild(elements.danmuContainer.lastChild);
            }
            
            if (state.isScrollingDanmu) {
                state.newDanmuCount++;
                elements.newCount.textContent = state.newDanmuCount;
                elements.newDanmuIndicator.classList.add('show');
            } else {
                elements.danmuContainer.scrollTop = 0;
            }
        }

        // åˆ›å»ºéšæœºå¼¹å¹•
        function createRandomDanmu() {
            if (state.isLiveComplete) return;
            const content = liveData.randomDanmuPool[Math.floor(Math.random() * liveData.randomDanmuPool.length)];
            addDanmu(content);
        }

        // æé€Ÿå¢é•¿åœ¨çº¿äººæ•°ï¼ˆæ¯300msæ¶¨1000-3000äººï¼‰
        function simulateFastViewerGrowth() {
            const growthInterval = setInterval(() => {
                if (state.isLiveComplete) {
                    clearInterval(growthInterval);
                    return;
                }
                
                // å¤§å¹…æå‡å¢é€Ÿï¼šæ¯æ¬¡æ¶¨1000-3000äºº
                const growthRate = Math.floor(Math.random() * 2000) + 1000;
                state.viewerCount += growthRate;
                
                // æ ¼å¼åŒ–æ˜¾ç¤º
                elements.viewerNum.textContent = state.viewerCount >= 10000 
                    ? (state.viewerCount / 10000).toFixed(1) + 'ä¸‡' 
                    : state.viewerCount.toLocaleString();
            }, 300); // æ¯300msæ›´æ–°ä¸€æ¬¡ï¼Œæ›´å¿«çš„å¢é•¿é¢‘ç‡
        }

        // æ»šåŠ¨åˆ°æœ€æ–°å¼¹å¹•
        function scrollToNewestDanmu() {
            elements.danmuContainer.scrollTop = 0;
            state.isScrollingDanmu = false;
            state.newDanmuCount = 0;
            elements.newDanmuIndicator.classList.remove('show');
        }

        // å¤„ç†å¼¹å¹•åŒºåŸŸæ»šåŠ¨
        function handleDanmuScroll() {
            const container = elements.danmuContainer;
            state.isScrollingDanmu = container.scrollHeight - container.scrollTop > container.clientHeight + 10;
        }

        // å¯åŠ¨
        window.addEventListener('DOMContentLoaded', initLive);
    </script>
</body>
</html>